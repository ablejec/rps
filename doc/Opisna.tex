% -*- TeX:Rnw -*-
% ----------------------------------------------------------------
% .R Sweave file  ************************************************
% ----------------------------------------------------------------
%%
% \VignetteIndexEntry{}
% \VignetteDepends{}
% \VignettePackage{}
%\documentclass[a4paper,12pt]{article}
\usepackage[slovene]{babel}
\usepackage[utf8]{inputenc} %% must be here for Sweave encoding check
\newcommand{\SVNRevision}{$ $Rev: 3 $ $}
%\newcommand{\SVNDate}{$ $Date:: 2009-02-2#$ $}
\newcommand{\SVNId}{$ $Id: program.Rnw 3 2009-02-22 17:36:08Z ABlejec $ $}
%\usepackage{babel}
%\input{abpkgB}
%\input{abpkg}
\input{abBeam}
\input{abcmd}
%\input{abpage}
\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage{amsmath,amssymb}
\usepackage{colortbl}
\usepackage{Sweave}
\input{mysweaveB}
\newcommand{\BV}{}
\newcommand{\EV}{}
\newcommand{\myemph}[1]{{\color{Sgreen} \textit{#1}}}
\input{./figs/SwPres-concordance}
%\SweaveOpts{echo=false}
%\usepackage{lmodern}
%\input{abfont}

% ----------------------------------------------------------------
\title{RPS\\Analiza podatkov}
\author{A. Blejec}
%\address{}%
%\email{}%
%
%\thanks{}%
%\subjclass{}%
%\keywords{}%

%\date{}%
%\dedicatory{}%
%\commby{}%
\begin{document}
\mode<article> {\maketitle}
\mode<presentation> {\frame{\titlepage}}
\tableofcontents
% ----------------------------------------------------------------
\begin{abstract}
 Primer analize podatkov
\end{abstract}
% -------------------------------------------------------------
%% Sweave settings for includegraphics default plot size (Sweave default is 0.8)
%% notice this must be after begin{document}
% \setkeys{Gin}{width=0.9\textwidth}
\setkeys{Gin}{width=0.7\textwidth}
% ----------------------------------------------------------------
O rasti in velikosti ljudi imamo nekaj mnenj, ki jih lahko izrazimo v obliki raziskovalnih vprašanj. Najprej si zastavimo vprašanja.
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Vprašanja}
Nekaj vprašanj, na katere bi radi odgovorili je:
\begin{itemize}
  \item Ali so fantje večji od deklet?
  \item Ali so fantje težji od deklet?
  \item Ali sta razpon rok in višina približno enaka?
  \item Ali drži Galtonovo opažanje glede višine otrok in staršev?
  \item ...
\end{itemize}
Zbrali smo nekaj podatkov o študentih, s katerimi si bomo lahko poskusili odgovoriti.
\end{frame}
%% <<<<<<---------------------|
Nato zberemo podatke, s katerimi bomo poskusili odgovoriti na vprašanja. Ker predvidevamo, da nas bo zanimalo še kaj, zberemo podatke o še nekaj spremenljivkah.
\begin{Schunk}
\begin{Sinput}
> lfn <- "Podatki2012.txt"
\end{Sinput}
\end{Schunk}

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Podatki}
Podaki so o študentih 3. letnika biologije v letu 2012/13 so v datoteki \file{lfn} in na \url{http://bit.ly/16oBVpR}
\begin{Schunk}
\begin{Sinput}
> fpath <- "http://bit.ly/16oBVpR"
> data <- read.table(fpath, header = TRUE, sep = "\t")
> names(data)
\end{Sinput}
\begin{Soutput}
 [1] "starost" "mesec"   "spol"    "masa"    "visina" 
 [6] "roke"    "cevelj"  "lasje"   "oci"     "mati"   
[11] "oce"     "majica" 
\end{Soutput}
\end{Schunk}
\end{frame}
%% <<<<<<---------------------|

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Opisna statistika}
\begin{Schunk}
\begin{Sinput}
> summary(data[, 1:6])
\end{Sinput}
\begin{Soutput}
    starost          mesec        spol        masa      
 Min.   :20.00   Min.   : 0.000   F:33   Min.   :50.00  
 1st Qu.:21.00   1st Qu.: 5.000   M:10   1st Qu.:55.50  
 Median :21.00   Median : 7.000          Median :61.00  
 Mean   :22.07   Mean   : 6.814          Mean   :63.42  
 3rd Qu.:22.00   3rd Qu.: 9.500          3rd Qu.:70.00  
 Max.   :59.00   Max.   :11.000          Max.   :91.00  
                                                        
     visina           roke      
 Min.   :156.0   Min.   :154.0  
 1st Qu.:164.0   1st Qu.:163.2  
 Median :170.0   Median :167.8  
 Mean   :169.9   Mean   :169.3  
 3rd Qu.:173.5   3rd Qu.:172.5  
 Max.   :189.0   Max.   :193.0  
                 NA's   :5      
\end{Soutput}
\end{Schunk}
Ali pri podatkih kaj opazite?
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Nenavadni podatki}
Kaj storiti s tistim, ki je napisal, da je rojen v mesecu 0?

Eden pa je star 59 let??
\end{frame}
%% <<<<<<---------------------|


%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Nadaljevanje opisa}
\begin{Schunk}
\begin{Sinput}
> summary(data[, 7:dim(data)[2]])
\end{Sinput}
\begin{Soutput}
     cevelj      lasje  oci         mati      
 Min.   :36.00   S:19   S:24   Min.   :155.0  
 1st Qu.:38.00   T:24   T:19   1st Qu.:160.0  
 Median :39.00                 Median :165.0  
 Mean   :40.02                 Mean   :165.4  
 3rd Qu.:41.50                 3rd Qu.:168.0  
 Max.   :48.00                 Max.   :180.0  
                               NA's   :5      
      oce        majica 
 Min.   :170.0   L : 5  
 1st Qu.:174.2   M :19  
 Median :179.5   S :16  
 Mean   :179.1   XL: 1  
 3rd Qu.:182.0   XS: 2  
 Max.   :190.0          
 NA's   :5              
\end{Soutput}
\end{Schunk}
\end{frame}
%% <<<<<<---------------------|
\clearpage
\section{Višina in spol}

Primerjajte razpone vrednosti višin študentov in staršev.

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Višina po spolu}
Povzetek višin glede na spol
\begin{Schunk}
\begin{Sinput}
> summary(data$mati)
\end{Sinput}
\begin{Soutput}
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  155.0   160.0   165.0   165.4   168.0   180.0       5 
\end{Soutput}
\begin{Sinput}
> by(data$visina, data$spol, summary)
\end{Sinput}
\begin{Soutput}
data$spol: F
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  156.0   163.0   168.0   166.8   170.0   178.0 
--------------------------------------------- 
data$spol: M
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  171.0   178.5   180.0   180.0   182.5   189.0 
\end{Soutput}
\begin{Sinput}
> summary(data$oce)
\end{Sinput}
\begin{Soutput}
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  170.0   174.2   179.5   179.1   182.0   190.0       5 
\end{Soutput}
\end{Schunk}
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Doseg  spremenljivk v objektu \code{data.frame}}
Poglejte kakšne so vrednosti spremenljivke \code{visina}!\\
Ali je v delovnem prostoru (workspace)?\\
Do spremenljivk lahko pridem posredno na več načinov
\begin{itemize}
  \item \code{data\$visina}
  \item \code{data[,\"visina\"]}
  \item \code{data[,5]}
\end{itemize}
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Neposreden dostop}
Neposreden dostop do spremenljivk omogoči
\begin{Schunk}
\begin{Sinput}
> attach(data)
> length(visina)
\end{Sinput}
\begin{Soutput}
[1] 43
\end{Soutput}
\begin{Sinput}
> visina[1:5]
\end{Sinput}
\begin{Soutput}
[1] 178 173 178 167 171
\end{Soutput}
\end{Schunk}
\end{frame}
%% <<<<<<---------------------|


Grafični prikazi
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Grafični prikaz podatkov}
\mode<presentation> {\mode<presentation> {\vspace{-1cm}}}
\begin{Schunk}
\begin{Sinput}
> plot(visina)
\end{Sinput}
\end{Schunk}
\includegraphics{./figs/SwPres-009}
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Grafični prikaz podatkov}
\mode<presentation> {\vspace{-1cm}}
\begin{Schunk}
\begin{Sinput}
> plot(visina, pch = 16, col = spol)
\end{Sinput}
\end{Schunk}
\includegraphics{./figs/SwPres-010}
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Kumulativa}
\mode<presentation> {\vspace{-1cm}}
\begin{Schunk}
\begin{Sinput}
> x <- visina
> plot(x, rank(x), pch = 16, col = spol)
\end{Sinput}
\end{Schunk}
\includegraphics{./figs/SwPres-011}
\end{frame}
%% <<<<<<---------------------|

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Kumulativa in normalna aproksimacija}
\mode<presentation> {\vspace{-1cm}}
\begin{Schunk}
\begin{Sinput}
> x <- visina
> plot(x, rank(x), pch = 16, col = spol)
> q <- qnorm((rank(x) - 0.5)/length(x), mean(x), 
+     sd(x))
> points(q, rank(x), col = 4)
> segments(x, rank(x), q, rank(x))
\end{Sinput}
\end{Schunk}
\includegraphics{./figs/SwPres-012}
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Slika kvantilov}
\mode<presentation> {\vspace{-1cm}}
\begin{Schunk}
\begin{Sinput}
> qqnorm(visina, col = spol, pch = 16)
> qqline(visina)
\end{Sinput}
\end{Schunk}
\includegraphics{./figs/SwPres-013}
\end{frame}
%% <<<<<<---------------------|
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Boxplot}
\mode<presentation> {\vspace{-1cm}}
\begin{Schunk}
\begin{Sinput}
> boxplot(visina ~ spol, col = c("pink", "lightblue"))
> rug(visina[spol == "F"], side = 2)
> rug(visina[spol == "M"], side = 4)
\end{Sinput}
\end{Schunk}
\includegraphics{./figs/SwPres-014}

Dorišite točke za mediane. Pomagajte si s \fct{str}, \fct{locator}.
\end{frame}
%% <<<<<<---------------------|

\section{Testiranje višin}

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Student t-test}
\begin{Schunk}
\begin{Sinput}
> t.test(visina ~ spol)
\end{Sinput}
\begin{Soutput}
	Welch Two Sample t-test

data:  visina by spol 
t = -6.8838, df = 15.244, p-value = 4.77e-06
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -17.257671  -9.105965 
sample estimates:
mean in group F mean in group M 
       166.8182        180.0000 
\end{Soutput}
\end{Schunk}
Lahko tudi tako:
\begin{Schunk}
\begin{Sinput}
> t.test(visina[spol == "F"], visina[spol == "M"])
\end{Sinput}
\end{Schunk}
Oglejte si, kaj vrne funkcija \fct{t.test}. Dorišite točki povprečij.
\end{frame}
%% <<<<<<---------------------|
\clearpage
\section{Teža}
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Teža in spol}
Izberite si nekaj prejšnjih prikazov in
\begin{itemize}
  \item Raziščite kako je s težo pri dekletih in fantih.
  \item Kaj pa velja za BMI ($BMI=masa/visina^2$)
\end{itemize}

\end{frame}
%% <<<<<<---------------------|


\clearpage
\section{Galton in višina otrok in staršev}
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Velikost staršev in potomcev}
Galton je ugotavljal korelacijo med velikostjo staršev in potomcev.

Uvedel je pojem regresija, ki izvira iz ugotovitve, da so velikost staršev in potomcev v posebnem razmerju, ki zagotavlja 'regesijo' k povprečju.
\end{frame}
%% <<<<<<---------------------|

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Fantje}
\begin{Schunk}
\begin{Sinput}
> with(data, plot(oce, visina, col = spol, pch = 16, 
+     xlim = range(visina)))
> abline(c(0, 1), col = "blue")
> abline(lm(visina ~ oce, data = data), col = 3, 
+     lwd = 3)
> abline(lm(visina ~ oce, data = data[data$spol == 
+     "M", ]), col = "red", lwd = 3)
> abline(lm(visina ~ oce, data = data[data$spol == 
+     "F", ]), lwd = 3)
\end{Sinput}
\end{Schunk}
\end{frame}
%% <<<<<<---------------------|

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Fantje}
\includegraphics{./figs/SwPres-moski}
\end{frame}
%% <<<<<<---------------------|
\clearpage
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Dekleta}
\begin{Schunk}
\begin{Sinput}
> with(data, plot(mati, visina, col = spol, pch = 16, 
+     xlim = range(visina)))
> abline(c(0, 1), col = "blue")
> abline(lm(visina ~ mati, data = data), col = 3, 
+     lwd = 3)
> abline(lm(visina ~ mati, data = data[data$spol == 
+     "M", ]), col = "red", lwd = 3)
> abline(lm(visina ~ mati, data = data[data$spol == 
+     "F", ]), lwd = 3)
\end{Sinput}
\end{Schunk}
\end{frame}
%% <<<<<<---------------------|

%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Dekleta}
\includegraphics{./figs/SwPres-zenske}
\end{frame}
%% <<<<<<---------------------|
\clearpage
\setkeys{Gin}{width=0.9\textwidth}
%% |--------------------->>>>>>
\begin{frame}[fragile]
\frametitle{Fantje in dekleta}
\includegraphics{./figs/SwPres-moski2}
\end{frame}
%% <<<<<<---------------------|
 \setkeys{Gin}{width=0.7\textwidth}



% ----------------------------------------------------------------
%\bibliographystyle{amsplain}
%\bibliography{ab-general}
\clearpage
\section*{SessionInfo}
{\small
Windows 7 x64 (build 7601) Service Pack 1 \begin{itemize}\raggedright
  \item R version 2.15.1 (2012-06-22), \verb|x86_64-pc-mingw32|
  \item Locale: \verb|LC_COLLATE=Slovenian_Slovenia.1250|, \verb|LC_CTYPE=Slovenian_Slovenia.1250|, \verb|LC_MONETARY=Slovenian_Slovenia.1250|, \verb|LC_NUMERIC=C|, \verb|LC_TIME=Slovenian_Slovenia.1250|
  \item Base packages: base, datasets, graphics,
    grDevices, methods, stats, utils
  \item Loaded via a namespace (and not attached):
    tools~2.15.1
\end{itemize}Project path:\verb' D:/_Y/R/rps '\\[1] "nonexistent.Rnw"Main file :\verb' ../doc/nonexistent.Rnw '
\subsection*{View as vignette}
Project files can be viewed by pasting this code to \R\ console:\\
\begin{Schunk}
\begin{Sinput}
> projectName <-"rps";  mainFile <-"nonexistent"
\end{Sinput}
\end{Schunk}
\begin{Schunk}
\begin{Sinput}
> commandArgs()
> library(tkWidgets)
> openPDF(file.path(dirname(getwd()), "doc", paste(mainFile, 
+     "PDF", sep = ".")))
> viewVignette("viewVignette", projectName, file.path("../doc", 
+     paste(mainFile, "Rnw", sep = ".")))
\end{Sinput}
\end{Schunk}

\vfill \hrule \vspace{3pt} \footnotesize{
%Revision \SVNId\hfill (c) A. Blejec%\input{../_COPYRIGHT.}
%\SVNRevision ~/~ \SVNDate
\noindent
\texttt{Git Revision: \gitCommitterUnixDate-\gitAbbrevHash{} (\gitCommitterDate)} \hfill \copyright A. Blejec\\
\texttt{ \gitReferences} \hfill \verb'../doc/nonexistent.Rnw'\\

}

\end{document}
% ----------------------------------------------------------------
